#include "monty.h"

/**
 * main - runs and interpretates monty language intructions.
 * @argc: No of arguments in the command line
 * @argv: Arguments in the command line
 * Return: 1 if successfull / Error messagge otherwise
 */

int main(int argc, char **argv)
{
	int fd = 0, f_size = 0, num_lett = 1024, i = 0;
	char *buff = NULL, **cmd_lines = NULL, **command = NULL;
	stack_t **stack = NULL;

	printf("after cmd_lines");
	if(argc > 2)
		exit(EXIT_FAILURE);
	buff = malloc(num_lett * sizeof(char));
	if (!buff)
	{
		perror("Error: malloc failed");
		return (EXIT_FAILURE);
	}
	fd = open(argv[1], O_RDONLY);
	if (fd < 0)
	{
		perror("Error: Can't open file");
		free(buff);
		return (EXIT_FAILURE);
	}
	f_size = read(fd, buff, num_lett); /*f_size stores no. of chars of the file*/
	/*ADD ERROR MESSAGGE IF CANT READ*/
	if (f_size == -1)
	{
		close(fd);
		free(buff);
		return (0);
	}
	buff[f_size] = 00;
	cmd_lines = lines_tokenizer(buff); /*split file into lines"*/
	while (cmd_lines[i])
	{
		command = words_tokenizer(cmd_lines[i]);
		value = atoi(command[1]);
		/*get_op(command[0], stack, i);*/
		double_ptr_free(command);
		*command = NULL;

		printf("Variable global = %i \n", value);
		i++;
	}
	/*double_ptr_free(cmd_lines);*/
	free_stack(stack);
	return(0);
}
